# OpenClaw Dashboard

A self-hosted web dashboard for [OpenClaw](https://github.com/openclaw) — monitor your AI agent, chat with it, track token usage, manage tasks, and browse memory files.

<!-- ![screenshot](docs/screenshot.png) -->

## Features

- **Home Dashboard** — gateway status, heartbeat, cron jobs, database health at a glance
- **Chat Interface** — talk to your OpenClaw agent via the gateway WebSocket protocol
- **Kanban Tasks** — drag-and-drop task board synced with your workspace
- **Usage Analytics** — token spend, cost breakdowns, model comparisons over time
- **Session Viewer** — browse raw JSONL session logs from your agent
- **Memory Browser** — read and search your agent's markdown memory files
- **Light / Dark Mode** — automatic theme toggle
- **PIN Authentication** — simple PIN-based login to protect your dashboard
- **PWA Support** — installable on iOS and Android as a home-screen app

## Prerequisites

- **Node.js 18+**
- **OpenClaw** installed and running (gateway on port 18789)
- A populated `usage.db` SQLite database (generated by OpenClaw's usage tracker)

## Quick Start

### Option A: Let your OpenClaw agent set it up

Paste this prompt into your OpenClaw agent and it will do everything for you:

> Install the OpenClaw Dashboard. Clone https://github.com/MarcosV6/openclaw-dashboard.git into ~/.openclaw/workspace/dashboard. Create the usage.db database at ~/.openclaw/workspace/data/usage.db with the schema from the README if it doesn't already exist. Create .env.local from .env.example — find my gateway auth token from ~/.openclaw/openclaw.json (under gateway.auth.token) and fill it in for both NEXT_PUBLIC_OPENCLAW_TOKEN and OPENCLAW_AUTH_TOKEN. Set DASHBOARD_PIN to a random 4-digit number and tell me what it is. Leave all paths as defaults. Then run npm install, npm run build, and npm start. Tell me the URL when it's running.

### Option B: Manual setup

```bash
git clone https://github.com/MarcosV6/openclaw-dashboard.git
cd openclaw-dashboard

# Configure environment
cp .env.example .env.local
# Edit .env.local with your paths and tokens

# Install and run
npm install
npm run build
npm start
```

The dashboard will be available at `http://localhost:3000`.

## Connecting to OpenClaw

The dashboard reads data directly from your OpenClaw installation. If you installed OpenClaw with default settings, most paths are auto-detected under `~/.openclaw/` and you only need to configure your gateway auth token.

### 1. Find your gateway auth token

The chat feature connects to the OpenClaw gateway via WebSocket. To authenticate, you need the token from your OpenClaw config:

```bash
cat ~/.openclaw/openclaw.json | grep -A2 '"auth"'
```

Look for the `gateway.auth.token` value and set it in `.env.local`:

```
NEXT_PUBLIC_OPENCLAW_TOKEN=your-token-here
OPENCLAW_AUTH_TOKEN=your-token-here
```

> Both variables use the same token. `NEXT_PUBLIC_` is for the browser-side WebSocket connection, `OPENCLAW_AUTH_TOKEN` is for server-side API calls.

### 2. Verify your gateway is running

The dashboard expects the OpenClaw gateway on port 18789:

```bash
curl -s http://127.0.0.1:18789/health
```

If this doesn't respond, make sure the gateway is running (`openclaw gateway start` or check your OpenClaw setup).

### 3. Set up the database

The dashboard reads from a SQLite database for usage analytics, tasks, and health checks. OpenClaw doesn't create this database automatically — you need to initialize it:

```bash
mkdir -p ~/.openclaw/workspace/data

sqlite3 ~/.openclaw/workspace/data/usage.db <<'SQL'
CREATE TABLE IF NOT EXISTS usage (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    timestamp INTEGER NOT NULL,
    session_id TEXT,
    model_used TEXT NOT NULL,
    tokens_in INTEGER NOT NULL DEFAULT 0,
    tokens_out INTEGER NOT NULL DEFAULT 0,
    cost_estimate REAL NOT NULL DEFAULT 0.0,
    task_type TEXT,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP
);

CREATE INDEX IF NOT EXISTS idx_timestamp ON usage(timestamp);
CREATE INDEX IF NOT EXISTS idx_model ON usage(model_used);
CREATE INDEX IF NOT EXISTS idx_session ON usage(session_id);

CREATE TABLE IF NOT EXISTS health_checks (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    check_time DATETIME DEFAULT CURRENT_TIMESTAMP,
    status TEXT NOT NULL,
    message TEXT,
    record_count INTEGER
);

CREATE TABLE IF NOT EXISTS tasks (
    id TEXT PRIMARY KEY,
    title TEXT NOT NULL,
    description TEXT,
    priority TEXT NOT NULL DEFAULT 'medium',
    status TEXT NOT NULL DEFAULT 'todo',
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME DEFAULT CURRENT_TIMESTAMP
);

CREATE INDEX IF NOT EXISTS idx_tasks_status ON tasks(status);

CREATE TABLE IF NOT EXISTS completed_log (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    task_id TEXT NOT NULL,
    title TEXT NOT NULL,
    description TEXT,
    priority TEXT NOT NULL DEFAULT 'medium',
    completed_at DATETIME DEFAULT CURRENT_TIMESTAMP
);
SQL
```

If the database already exists (e.g. from an OpenClaw usage tracker or cron job), you're all set — just make sure `DATABASE_PATH` points to it.

### 4. Check your paths

If you used a non-default OpenClaw installation path, update these in `.env.local`:

| Variable | What it points to | How to find it |
|----------|-------------------|----------------|
| `DATABASE_PATH` | Usage SQLite database | `find ~/.openclaw -name "usage.db"` |
| `OPENCLAW_WORKSPACE` | Workspace directory (memory, docs, tasks) | `ls ~/.openclaw/workspace/` |
| `OPENCLAW_SESSIONS` | Agent session JSONL logs | `ls ~/.openclaw/agents/main/sessions/` |

If all your paths are under `~/.openclaw/` with the default layout, you don't need to set any of these — the dashboard auto-detects them.

## Environment Variables

Copy `.env.example` to `.env.local` and configure:

| Variable | Description | Default |
|----------|-------------|---------|
| `DATABASE_PATH` | Path to your OpenClaw `usage.db` file | `~/.openclaw/workspace/data/usage.db` |
| `OPENCLAW_WORKSPACE` | Path to your OpenClaw workspace directory | `~/.openclaw/workspace` |
| `OPENCLAW_SESSIONS` | Path to your agent's session JSONL files | `~/.openclaw/agents/main/sessions` |
| `NEXT_PUBLIC_GATEWAY_URL` | WebSocket URL for the OpenClaw gateway | `ws://127.0.0.1:18789` |
| `NEXT_PUBLIC_OPENCLAW_TOKEN` | Gateway auth token (see above) | — |
| `OPENCLAW_AUTH_TOKEN` | Server-side gateway auth token (same token) | — |
| `DASHBOARD_PIN` | PIN code for dashboard login | `0000` |
| `NEXT_PUBLIC_TAILSCALE_GATEWAY` | (Optional) Tailscale WebSocket URL for remote access | — |

## Production Setup with PM2

The included `ecosystem.config.js` runs the dashboard as a PM2 process:

```bash
npm run build
pm2 start ecosystem.config.js
pm2 save
```

Logs are written to `~/.openclaw/logs/dashboard.log`.

## Remote Access via Tailscale

To access the dashboard from your phone or other devices:

1. Install [Tailscale](https://tailscale.com) on the machine running the dashboard and on your devices
2. Set `NEXT_PUBLIC_TAILSCALE_GATEWAY` in `.env.local` to your machine's Tailscale WebSocket URL:
   ```
   NEXT_PUBLIC_TAILSCALE_GATEWAY=wss://your-machine.tailnet-name.ts.net
   ```
3. Use [Tailscale Serve](https://tailscale.com/kb/1242/tailscale-serve) to expose port 3000 over HTTPS:
   ```bash
   tailscale serve https / http://localhost:3000
   ```
4. Access the dashboard at `https://your-machine.tailnet-name.ts.net`

## PWA — Add to Home Screen

1. Open the dashboard URL in Safari (iOS) or Chrome (Android)
2. Tap **Share** > **Add to Home Screen**
3. The dashboard will launch as a full-screen app with its own icon

## Development

```bash
npm run dev
```

Runs the Next.js dev server on `http://localhost:3000` with hot reload.

## License

MIT
